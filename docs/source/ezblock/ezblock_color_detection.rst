颜色检测
============================

帕克是一款内置摄像头的自动驾驶汽车，它允许 EzBlock 程序利用物体检测和颜色识别代码。 在本节中，EzBlock 将用于创建颜色检测程序。

.. note:: 

    在尝试本部分之前，请确保树莓派相机的 FFC 电缆已正确且牢固地连接。 
    
    .. 有关牢固连接 FFC 电缆的详细说明，请参考：:ref:`部件清单和装配说明`。

在这个程序中，EzBlock首先会被告知待检测颜色的HSV（Hue-Saturation-Value）空间范围，然后利用OpenCV对HSV范围内的颜色进行处理去除背景噪声，最后对匹配颜色进行框选。

EzBlock 包括帕克的 6 种颜色模型，“红色”、“橙色”、“黄色”、“绿色”、“蓝色”和“紫色”。 色卡已在以下 PDF 中准备好，需可以下载下来打印。

* :download:`[PDF]颜色卡 <https://gitee.com/sunfounder/sf-pdf/raw/master/%E5%8D%A1%E7%89%87/%E7%9B%AE%E6%A0%87%E8%AF%86%E5%88%AB/%E9%A2%9C%E8%89%B2%E5%8D%A1.pdf>`

.. image:: img/color_card.png
    :width: 600

.. note::

    由于打印机碳粉或打印介质（如棕褐色纸）的不同，打印颜色可能与颜色模型的色调略有不同。这可能会导致不太准确的颜色识别。


.. image:: img/ezblock_color_detect.PNG

**提示**

.. image:: img/sp210512_121105.png

从远程控制页面拖动视频小部件，它将生成一个视频监视器。 


.. image:: img/sp211203_103130.png

点击视频监视器将会出现属性框，你可以在这里调节它的大小。

.. image:: img/sp210512_121125.png

通过将 **视频监视器** 块设置为 **开** 来启用视频监视器。 注意：将 **视频监视器** 设置为 **关** 将关闭监视器，但对象检测仍然可用。

.. image:: img/sp210512_134133.png

使用 **颜色检测** 块来启用颜色检测。 注意：一次只能检测一种颜色。

**示例**

.. note::

  你可以直接打开我们提供的示例或者是按照下图来编写程序，详细教程请参考 :ref:`open_create`.


.. image:: img/sp210512_134636.png

代码运行后，进入到远程控制界面，你将看到摄像头拍摄的画面，并且将红色物体框选出来。